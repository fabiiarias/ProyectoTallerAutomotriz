<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Egresos - Taller La Unión</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap" rel="stylesheet">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<style>
:root{
  --dark:#0B090A;
  --dark-soft:#161A1D;
  --red-dark:#660708;
  --red-main:#A4161A;
  --gray-2:#D3D3D3;
  --gray-3:#F5F3F4;
  --white:#fff;
}

/* GENERAL */
body{
  background:var(--gray-3);
  font-family: 'Helvetica', sans-serif;
}

.navbar{
  background: var(--white);
  border-bottom:4px solid var(--red-main);
}

.title{
  color:var(--red-dark);
  font-weight:600;
  font-family: 'Montserrat', sans-serif;
}

.card{
  border-radius:15px;
  border:none;
}

/* FORM */
.form-control{
  border-radius:10px;
  font-family: 'Helvetica', sans-serif;
}
.form-control:focus{
  border-color:var(--red-main);
  box-shadow:0 0 0 .15rem rgba(164,22,26,0.2);
}

/* BOTONES */
.btn-main{
  background:var(--red-main);
  color:white;
  font-family: 'Helvetica', sans-serif;
}
.btn-main:hover{
  background:var(--red-dark);
}

.btn-edit{
  background:#A4161A;
  color:white;
  border:none;
  font-family: 'Helvetica', sans-serif;
}
.btn-edit:hover{
  background:#660708;
}

.btn-delete{
  background:#161A1D;
  color:white;
  border:none;
  font-family: 'Helvetica', sans-serif;
}
.btn-delete:hover{
  background:#0B090A;
}

/* TABLA */
.table thead{
  background:var(--dark-soft);
  color:white;
  font-family: 'Arial', sans-serif;
}

.table td, .table th{
  font-family: 'Helvetica', sans-serif;
}
</style>
</head>

<body>

<nav class="navbar p-3">
  <div class="container">
    <h4 class="title mb-0">
      <i class="fa-solid fa-arrow-down-wide-short"></i>
      Registro de Egresos
    </h4>
  </div>
</nav>

<div class="container mt-4">

<!-- FORM -->
<div class="card p-4 mb-4">
  <h5 style="font-family: Arial, sans-serif;">Nuevo egreso</h5>

  <form id="formEgreso" class="row g-3">

    <input type="hidden" id="indexEdit">

    <div class="col-md-4">
      <label class="form-label">Motivo</label>
      <input type="text" id="motivo" class="form-control" required>
    </div>

    <div class="col-md-3">
      <label class="form-label">Monto ($)</label>
      <input type="number" id="monto" class="form-control" min="0" required>
    </div>

    <div class="col-md-3">
      <label class="form-label">Cantidad</label>
      <input type="number" id="cantidad" class="form-control" min="1" required>
    </div>

    <div class="col-md-2">
      <label class="form-label">Fecha</label>
      <input type="date" id="fecha" class="form-control" required>
    </div>

    <div class="col-md-12">
    <button id="btnGuardar" class="btn btn-main">
      Registrar egreso
    </button>
  </div>

  </form>
</div>

<!-- TABLA -->
<div class="card p-4">
<h5 style="font-family: Arial, sans-serif;">Historial de egresos</h5>

<div class="table-responsive">
<table class="table table-hover">
<thead>
<tr>
  <th>Motivo</th>
  <th>Monto</th>
  <th>Cantidad</th>
  <th>Fecha</th>
  <th>Acciones</th>
</tr>
</thead>

<tbody id="tabla"></tbody>
</table>
</div>

</div>
</div>

<script>
const form = document.getElementById("formEgreso");
const tabla = document.getElementById("tabla");

let egresos = [
  {motivo:"Compra de aceite", monto:25, cantidad:6, fecha:"2025-10-01"},
  {motivo:"Pastillas de freno", monto:40, cantidad:4, fecha:"2025-10-03"},
  {motivo:"Filtros de aire", monto:18, cantidad:10, fecha:"2025-10-05"}
];

function render(){
  tabla.innerHTML = "";

  egresos.forEach((e,index)=>{

    tabla.innerHTML += `
      <tr>
        <td>${e.motivo}</td>
        <td>$${e.monto}</td>
        <td>${e.cantidad}</td>
        <td>${e.fecha}</td>
        <td class="text-nowrap">
          <button class="btn btn-sm btn-edit" onclick="editar(${index})">
            Editar
          </button>
          
          <button class="btn btn-sm btn-delete" onclick="eliminar(${index})">
            Eliminar
          </button>
        </td>
      </tr>
    `;
  });
}

form.addEventListener("submit", e=>{
  e.preventDefault();

  const data = {
    motivo: motivo.value,
    monto: parseFloat(monto.value),
    cantidad: parseInt(cantidad.value),
    fecha: fecha.value
  };

  if(indexEdit.value === ""){
    egresos.push(data);
  }else{
    egresos[indexEdit.value] = data;
    indexEdit.value = "";
  }

  form.reset();
  render();
});

function editar(index){
  const e = egresos[index];

  motivo.value = e.motivo;
  monto.value = e.monto;
  cantidad.value = e.cantidad;
  fecha.value = e.fecha;

  indexEdit.value = index;
}

function eliminar(index){
  if(confirm("¿Desea eliminar este registro?")){
    egresos.splice(index,1);
    render();
  }
}

render();
</script>

</body>
</html>
