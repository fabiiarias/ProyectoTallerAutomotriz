<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Registro de Vehículos - Taller La Unión</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap" rel="stylesheet">

<style>
:root{
  --dark:#0B090A;
  --dark-soft:#161A1D;
  --red-dark:#660708;
  --red-main:#A4161A;
  --red-bold:#BA181B;
  --red-soft:#E5383B;
  --gray-1:#B1A7A6;
  --gray-2:#D3D3D3;
  --gray-3:#F5F3F4;
  --white:#FFFFFF;
}

body{
  background:var(--gray-3);
  font-family: 'Helvetica', sans-serif;
}

/* NAV */
.navbar{
  background:var(--white);
  border-bottom:4px solid var(--red-main);
}
.title{
  color:var(--red-dark);
  font-weight:600;
  font-family: 'Montserrat', sans-serif;
}

/* CARD */
.card{
  background:var(--white);
  border:none;
  border-radius:15px;
  box-shadow:0 4px 12px rgba(0,0,0,.08);
}

/* FORM */
label{
  font-family: 'Arial', sans-serif;
}
.form-control, select, textarea{
  border-radius:10px;
  font-family: 'Helvetica', sans-serif;
}
.form-control:focus, select:focus, textarea:focus{
  border-color:var(--red-main);
  box-shadow:0 0 0 .15rem rgba(164,22,26,.2);
}

/* BUTTONS */
.btn-pill, .btn-edit, .btn-delete{
  font-family: 'Helvetica', sans-serif;
}
.btn-pill{
  background:var(--red-main);
  color:var(--white);
  border:none;
  border-radius:30px;
  padding:8px 22px;
  font-weight:600;
}
.btn-pill:hover{
  background:var(--red-dark);
}

.btn-edit{
  background:var(--red-main);
  color:white;
  border:none;
}
.btn-edit:hover{ background:var(--red-dark); }

.btn-delete{
  background:var(--dark-soft);
  color:white;
  border:none;
}
.btn-delete:hover{ background:var(--dark); }

/* TABLE */
.table thead{
  background:var(--dark-soft);
  color:white;
}

</style>
</head>

<body>

<nav class="navbar p-3">
  <div class="container">
    <h4 class="title mb-0">
      <i class="fa-solid fa-car"></i> Registro de Vehículos
    </h4>
  </div>
</nav>

<div class="container mt-4">

<!-- FORM -->
<div class="card p-4 mb-4">
<h5 style="font-family: 'Montserrat', sans-serif;">Agregar vehículo</h5>

<form id="formVehiculo" class="row g-3">

<input type="hidden" id="indexEdit">

<div class="col-md-3">
<label class="form-label">Marca</label>
<input type="text" id="marca" class="form-control" required>
</div>

<div class="col-md-3">
<label class="form-label">Modelo</label>
<input type="text" id="modelo" class="form-control" required>
</div>

<div class="col-md-2">
<label class="form-label">Año</label>
<input type="number" id="anio" class="form-control" min="1970" max="2050" required>
</div>

<div class="col-md-2">
<label class="form-label">Placa</label>
<input type="text" id="placa" class="form-control" required>
</div>

<div class="col-md-2">
<label class="form-label">Estado</label>
<select id="estado" class="form-control" required>
  <option>Pendiente</option>
  <option>En reparación</option>
  <option>Reparado</option>
</select>
</div>

<div class="col-md-12">
<label class="form-label">Problema reportado</label>
<textarea id="problema" class="form-control" rows="2" required></textarea>
</div>

<div class="col-md-12">
<label class="form-label">Revisión inicial</label>
<textarea id="revision" class="form-control" rows="2" placeholder="Observaciones iniciales..."></textarea>
</div>

<hr>

<div class="col-md-4">
<label class="form-label">Nombre del dueño</label>
<input type="text" id="dueno" class="form-control" required>
</div>

<div class="col-md-3">
<label class="form-label">Teléfono</label>
<input type="tel" id="telefono" class="form-control" required>
</div>

<div class="col-md-3">
<label class="form-label">Correo</label>
<input type="email" id="correo" class="form-control" required>
</div>

<div class="col-md-2">
<label class="form-label">Cédula</label>
<input type="text" id="cedula" class="form-control" required>
</div>

<div class="col-12 text-center mt-3">
<button class="btn btn-pill">
  Registrar vehículo
</button>
</div>

</form>
</div>

<!-- TABLE -->
<div class="card p-4">
<h5 style="font-family: 'Montserrat', sans-serif;">Registro de vehículos</h5>

<div class="table-responsive">
<table class="table table-hover">
<thead>
<tr>
<th>Vehículo</th>
<th>Placa</th>
<th>Estado</th>
<th>Problema</th>
<th>Revisión inicial</th>
<th>Dueño</th>
<th>Contacto</th>
<th>Cédula</th>
<th>Acciones</th>
</tr>
</thead>

<tbody id="tabla"></tbody>
</table>
</div>

</div>

</div>

<script>
const form = document.getElementById("formVehiculo");
const tabla = document.getElementById("tabla");

let vehiculos = [
  {
    marca:"Toyota",
    modelo:"Hilux",
    anio:2021,
    placa:"ABC-123",
    estado:"En reparación",
    problema:"Fallo en frenos",
    revision:"Revisión inicial: desgaste de pastillas",
    dueno:"Juan Pérez",
    telefono:"0994567821",
    correo:"juan@mail.com",
    cedula:"1712345678"
  },
  {
    marca:"Chevrolet",
    modelo:"Spark",
    anio:2019,
    placa:"XYZ-456",
    estado:"Pendiente",
    problema:"Cambio de embrague",
    revision:"Embrague patinando, revisar kit completo",
    dueno:"María Gómez",
    telefono:"0986543210",
    correo:"maria@gmail.com",
    cedula:"0912345554"
  },
  {
    marca:"Hyundai",
    modelo:"Tucson",
    anio:2022,
    placa:"DEF-789",
    estado:"Reparado",
    problema:"Servicio completo",
    revision:"Todo en orden",
    dueno:"Carlos Ruiz",
    telefono:"0971122334",
    correo:"carlos@mail.com",
    cedula:"1315566778"
  }
];

function render(){
  tabla.innerHTML = "";

  vehiculos.forEach((v,index)=>{

    tabla.innerHTML+=`
    <tr>
      <td>${v.marca} ${v.modelo} ${v.anio}</td>
      <td>${v.placa}</td>
      <td>${v.estado}</td>
      <td>${v.problema}</td>
      <td>${v.revision || ""}</td>
      <td>${v.dueno}</td>
      <td>${v.telefono}<br>${v.correo}</td>
      <td>${v.cedula}</td>
      <td class="text-nowrap">
        <button class="btn btn-sm btn-edit" onclick="editar(${index})">Editar</button>
        <button class="btn btn-sm btn-delete" onclick="eliminar(${index})">Eliminar</button>
      </td>
    </tr>
    `;
  });
}

/* SAVE OR EDIT */
form.addEventListener("submit", e=>{
  e.preventDefault();

  const data = {
    marca:marca.value,
    modelo:modelo.value,
    anio:anio.value,
    placa:placa.value,
    estado:estado.value,
    problema:problema.value,
    revision:revision.value,
    dueno:dueno.value,
    telefono:telefono.value,
    correo:correo.value,
    cedula:cedula.value
  };

  const index = indexEdit.value;

  if(index===""){
    vehiculos.push(data);
  }else{
    vehiculos[index] = data;
    indexEdit.value="";
  }

  form.reset();
  render();
});

/* EDIT */
function editar(index){
  const v = vehiculos[index];

  marca.value = v.marca;
  modelo.value = v.modelo;
  anio.value = v.anio;
  placa.value = v.placa;
  estado.value = v.estado;
  problema.value = v.problema;
  revision.value = v.revision;
  dueno.value = v.dueno;
  telefono.value = v.telefono;
  correo.value = v.correo;
  cedula.value = v.cedula;

  indexEdit.value = index;
}

/* DELETE */
function eliminar(index){
  if(confirm("¿Eliminar este vehículo?")){
    vehiculos.splice(index,1);
    render();
  }
}

render();
</script>

</body>
</html>
