<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Módulo de Citas</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&family=Helvetica&display=swap" rel="stylesheet">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<style>
:root{
 --dark:#0B090A;
 --dark-soft:#161A1D;
 --red-dark:#660708;
 --red-main:#A4161A;
 --red-strong:#BA181B;
 --gray-1:#B1A7A6;
 --gray-2:#D3D3D3;
 --gray-3:#F5F3F4;
 --white:#FFFFFF;
}

body{
 background:var(--gray-3);
 font-family: 'Helvetica', sans-serif;
}

/* NAVBAR */
.navbar{
  background:var(--white);
  border-bottom:4px solid var(--red-main);
}
.title{
  color:var(--red-dark);
  font-weight:600;
  font-family: 'Montserrat', sans-serif;
}

/* CARDS */
.card{
 border:none;
 background:#fff;
 border-radius:15px;
 box-shadow:0 4px 12px rgba(0,0,0,.08);
}

/* Encabezados de tarjetas */
.card h5{
  font-family: 'Arial', sans-serif;
  font-weight:600;
}

/* INPUTS */
.form-control{
 border-radius:10px;
 font-family: 'Helvetica', sans-serif;
}
.form-control:focus{
 border-color:var(--red-main);
 box-shadow:0 0 0 .15rem rgba(164,22,26,.25);
}

/* BUTTONS */
.btn-pill{
  background:var(--red-main);
  color:var(--white);
  border:none;
  border-radius:30px;
  padding:8px 22px;
  font-weight:600;
  font-family: 'Arial', sans-serif;
}
.btn-pill:hover{
 background:var(--red-dark);
}

.btn-edit{
 background:var(--red-main);
 color:#fff;
 border:none;
 font-family: 'Arial', sans-serif;
}
.btn-edit:hover{
 background:var(--red-dark);
}

.btn-delete{
 background:var(--dark-soft);
 color:#fff;
 border:none;
 font-family: 'Arial', sans-serif;
}
.btn-delete:hover{
 background:var(--dark);
}

.btn-cancel{
 background:var(--red-strong);
 color:#fff;
 border:none;
 font-family: 'Arial', sans-serif;
}
.btn-cancel:hover{
 background:var(--red-dark);
}

/* TABLE */
.table thead{
 background:var(--dark-soft);
 color:#fff;
 font-family: 'Arial', sans-serif;
}

.table th,
.table td{
 vertical-align:middle;
 font-family: 'Helvetica', sans-serif;
}

.canceled {
  color: red;
  font-weight: 600;
  font-family: 'Helvetica', sans-serif;
}
</style>
</head>

<body>

<!-- NAVBAR -->
<nav class="navbar p-3">
  <div class="container">
    <h4 class="title mb-0">
      <i class="fa-solid fa-calendar-check"></i> Registro de Citas
    </h4>
  </div>
</nav>

<div class="container mt-4">

<!-- FORMULARIO -->
<div class="card p-4 mb-4">

<h5 class="mb-3">Registro de citas</h5>

<form id="formCita" class="row g-3">

<input type="hidden" id="editIndex">

<div class="col-md-3">
<label>Identificación</label>
<input type="text" id="identificacion" class="form-control" required>
</div>

<div class="col-md-4">
<label>Cliente</label>
<input type="text" id="cliente" class="form-control" required>
</div>

<div class="col-md-3">
<label>Fecha y hora</label>
<input type="datetime-local" id="fecha" class="form-control" required>
</div>

<div class="col-md-2">
<label>Teléfono</label>
<input type="tel" id="telefono" class="form-control" required>
</div>

<div class="col-md-4">
<label>Correo</label>
<input type="email" id="correo" class="form-control" required>
</div>

<div class="col-md-4">
<label>Servicio</label>
<input type="text" id="servicio" class="form-control" required>
</div>

<div class="col-md-4">
<label>Modelo del vehículo</label>
<input type="text" id="modelo" class="form-control" required>
</div>

<div class="col-12 text-center mt-3">
<button class="btn btn-pill">
 Registrar cita
</button>
</div>

</form>

</div>

<!-- TABLA -->
<div class="card p-4">

<h5 class="mb-3">Citas agendadas</h5>

<div class="table-responsive">

<table class="table table-hover">

<thead>
<tr>
<th>ID</th>
<th>Cliente</th>
<th>Fecha</th>
<th>Servicio</th>
<th>Vehículo</th>
<th>Contacto</th>
<th>Estado</th>
<th>Acciones</th>
</tr>
</thead>

<tbody id="tablaCitas"></tbody>

</table>

</div>

</div>

</div>

<script>
const form = document.getElementById("formCita");
const tabla = document.getElementById("tablaCitas");

let citas = [
 {
  id:"0102233445",
  cliente:"José Morales",
  fecha:"2025-01-10T10:30",
  telefono:"0991234567",
  correo:"jose@mail.com",
  servicio:"Mantenimiento",
  modelo:"Toyota Corolla",
  estado:"Agendada"
 },
 {
  id:"0923456701",
  cliente:"Ana Torres",
  fecha:"2025-01-11T14:00",
  telefono:"0982233445",
  correo:"ana@gmail.com",
  servicio:"Frenos",
  modelo:"Chevrolet Aveo",
  estado:"Agendada"
 },
 {
  id:"1712345678",
  cliente:"Carlos Pérez",
  fecha:"2025-01-14T09:15",
  telefono:"0971122334",
  correo:"carlos@mail.com",
  servicio:"Alineación",
  modelo:"Hyundai Tucson",
  estado:"Agendada"
 }
];

function render(){
 tabla.innerHTML="";
 citas.forEach((c,i)=>{
  tabla.innerHTML += `
   <tr class="${c.estado==='Cancelada' ? 'canceled' : ''}">
    <td>${c.id}</td>
    <td>${c.cliente}</td>
    <td>${c.fecha.replace("T"," ")}</td>
    <td>${c.servicio}</td>
    <td>${c.modelo}</td>
    <td>${c.telefono}<br>${c.correo}</td>
    <td>${c.estado}</td>
    <td>
      <button class="btn btn-sm btn-edit" onclick="editar(${i})" ${c.estado==='Cancelada' ? 'disabled' : ''}>Editar</button>
      <button class="btn btn-sm btn-delete" onclick="eliminar(${i})">Eliminar</button>
      <button class="btn btn-sm btn-cancel" onclick="cancelar(${i})" ${c.estado==='Cancelada' ? 'disabled' : ''}>Cancelar</button>
    </td>
   </tr>
  `;
 });
}

form.addEventListener("submit", e=>{
 e.preventDefault();

 let data={
  id:identificacion.value,
  cliente:cliente.value,
  fecha:fecha.value,
  telefono:telefono.value,
  correo:correo.value,
  servicio:servicio.value,
  modelo:modelo.value,
  estado:"Agendada"
 };

 if(editIndex.value===""){
  citas.push(data);
 } else {
  data.estado = citas[editIndex.value].estado;
  citas[editIndex.value] = data;
  editIndex.value="";
 }

 form.reset();
 render();
});

function editar(i){
 let c = citas[i];
 if(c.estado==='Cancelada'){
   alert("No se puede editar una cita cancelada.");
   return;
 }
 identificacion.value = c.id;
 cliente.value = c.cliente;
 fecha.value = c.fecha;
 telefono.value = c.telefono;
 correo.value = c.correo;
 servicio.value = c.servicio;
 modelo.value = c.modelo;
 editIndex.value = i;
}

function eliminar(i){
 if(confirm("¿Eliminar la cita?")){
  citas.splice(i,1);
  render();
 }
}

function cancelar(i){
 if(confirm("¿Cancelar la cita?")){
  citas[i].estado = "Cancelada";
  render();
 }
}

render();
</script>

</body>
</html>
